{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://vdom-deep-dive-slides/vdom-deep-dive/webpack/universalModuleDefinition","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/lib/component.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/lib/diff.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/lib/jsx-runtime.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/lib/render.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/lib/vdom.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/utils/style.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/utils/utils.ts","webpack://vdom-deep-dive-slides/vdom-deep-dive/webpack/bootstrap","webpack://vdom-deep-dive-slides/vdom-deep-dive/webpack/runtime/define property getters","webpack://vdom-deep-dive-slides/vdom-deep-dive/webpack/runtime/hasOwnProperty shorthand","webpack://vdom-deep-dive-slides/vdom-deep-dive/webpack/runtime/make namespace object","webpack://vdom-deep-dive-slides/vdom-deep-dive/./src/index.ts","webpack://vdom-deep-dive-slides/webpack/bootstrap","webpack://vdom-deep-dive-slides/./src/index.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vdom-deep-dive\"] = factory();\n\telse\n\t\troot[\"vdom-deep-dive\"] = factory();\n})(self, () => {\nreturn ","import { createDiff, skip } from \"./diff\"\nimport { applyDiff } from \"./render\"\nimport { VDOMNodeUpdater } from \"./types/diff\"\nimport { VDOMComponent, VDOMNode } from \"./types/vdom\"\n\nexport type ComponentProps = {\n  [prop: string]: any,\n}\n\ntype ComponentState = {\n  [prop: string]: any,\n}\n\nexport abstract class Component<\n  P extends ComponentProps = ComponentProps,\n  S extends ComponentState = ComponentState,\n> {\n\n  protected props: P\n  protected state: S\n\n  private currentRootNode: VDOMNode\n  private mountedElement: Element | Text | null\n\n  protected setState(updater: ((s: S) => S)) {\n    if (!this.mountedElement) {\n      throw new Error(\"Updating an unmounted component\")\n    }\n    const newState = updater(this.state)\n    if (newState !== this.state) {\n      this.state = newState\n      const diff = this.getUpdateDiff();\n      applyDiff(this.mountedElement, diff)\n    }\n  }\n\n  public setProps(props: P): VDOMNodeUpdater {\n    if (!this.mountedElement) {\n      throw new Error(\"Setting the props of an unmounted component\")\n    }\n    const newState = this.componentWillRecieveProps(props, this.state)\n    if (newState !== this.state || props !== this.props) {\n      this.state = newState\n      this.props = props\n      return this.getUpdateDiff()\n    }\n    return skip()\n  }\n\n  public initProps(props: P): VDOMNode {\n    this.props = props\n    this.currentRootNode = this.render()\n    return this.currentRootNode\n  }\n\n  private getUpdateDiff(): VDOMNodeUpdater {\n    const newRootNode = this.render()\n    const diff = createDiff(this.currentRootNode, newRootNode)\n    if (diff.kind == 'replace') {\n      diff.callback = elem => this.mountedElement = elem\n    }\n    this.currentRootNode = newRootNode\n    requestAnimationFrame(() => this.componentDidUpdate())\n    return diff\n  }\n\n  public notifyMounted(elem: Element | Text) {\n    this.mountedElement = elem\n    requestAnimationFrame(() => this.componentDidMount())\n  }\n\n  public unmount() {\n    this.componentWillUnmount()\n    this.mountedElement = null\n  }\n\n  public componentDidMount() { }\n  public componentWillRecieveProps(props: P, state: S): S { return state }\n  public componentDidUpdate() { }\n  public componentWillUnmount() { }\n\n  public abstract render(): VDOMNode\n}\n\nexport function createComponent<P extends ComponentProps>(\n  component: { new(): Component<P> },\n  props: P & { key: string | number },\n): VDOMComponent<P> {\n  const componentProps: P = { ...props };\n  delete componentProps.key;\n  return {\n    kind: 'component',\n    key: props.key,\n    component,\n    props: componentProps,\n    instance: null\n  }\n}\n","import { isEmpty } from \"../utils/utils\";\nimport {\n    VDOMNodeUpdater,\n    SkipOperation,\n    RemoveOperation,\n    ReplaceOperation,\n    AttributesUpdater,\n    ChildUpdater,\n    UpdateOperation,\n    InsertOperation,\n} from \"./types/diff\"\nimport { VDOMAttributes, VDOMElement, VDOMNode } from \"./types/vdom\"\n\n\nexport const createDiff = (oldNode: VDOMNode, newNode: VDOMNode): VDOMNodeUpdater => {\n    if (oldNode.kind == 'text' && newNode.kind == 'text' && oldNode.value == newNode.value) {\n        return skip();\n    }\n\n    if (oldNode.kind == 'text' || newNode.kind == 'text') {\n        return replace(newNode);\n    }\n\n    if (\n        oldNode.kind == 'component' &&\n        newNode.kind == 'component' &&\n        oldNode.component == newNode.component &&\n        oldNode.instance\n    ) {\n        newNode.instance = oldNode.instance\n        if (newNode.props == oldNode.props) {\n            return skip()\n        }\n        return newNode.instance.setProps(newNode.props);\n    }\n\n    if (newNode.kind == 'component') {\n        newNode.instance == new newNode.component()\n        return replace(newNode.instance!.initProps(newNode.props), elem => newNode.instance?.notifyMounted(elem))\n    }\n\n    if (oldNode.kind == 'component') {\n        oldNode.instance?.unmount()\n        oldNode.instance = null\n        return replace(newNode);\n    }\n\n    if (oldNode.tagname !== newNode.tagname) {\n        return replace(newNode);\n    }\n\n    // get the updated and replaced attributes\n    return update(oldNode, newNode);\n\n}\n\nexport const skip = (): SkipOperation => ({\n    kind: 'skip',\n});\n\nconst replace = (\n    newNode: VDOMNode,\n    callback?: (node: Element | Text) => void\n): ReplaceOperation => ({\n    kind: 'replace',\n    newNode,\n    callback,\n});\n\nconst remove = (): RemoveOperation => ({\n    kind: 'remove',\n});\n\nconst insert = (newNode: VDOMNode): InsertOperation => ({\n    kind: 'insert',\n    node: newNode,\n});\n\nconst update = (oldNode: VDOMElement, newNode: VDOMElement): UpdateOperation => {\n\n    const attributesToRemove = Object.keys(oldNode.props ?? {})\n        .filter(att => !Object.keys(newNode.props ?? {}).includes(att));\n\n    let attributesToSet: VDOMAttributes;\n    if (!newNode.props || Object.keys(newNode.props).length == 0) {\n        attributesToSet = {};\n    } else if (!oldNode.props || Object.keys(oldNode.props).length == 0) {\n        attributesToSet = newNode.props;\n    } else {\n        attributesToSet = Object.keys(newNode.props)\n            .filter(att => oldNode.props![att] != newNode.props![att])\n            .reduce<VDOMAttributes>(\n                (upd, att) => Object.assign(upd, { [att]: newNode.props![att] }),\n                {},\n            );\n    }\n\n    const attUpdater: AttributesUpdater = {\n        remove: attributesToRemove,\n        set: attributesToSet,\n    }\n\n    const childrenUpdater: ChildUpdater[] = newChildrenDiff((oldNode.children ?? []), (newNode.children ?? []))\n\n    return {\n        kind: 'update',\n        attributes: attUpdater,\n        children: childrenUpdater,\n    }\n}\n\nconst newChildrenDiff = (oldChildren: VDOMNode[], newChildren: VDOMNode[]): ChildUpdater[] => {\n\n    const operations: ChildUpdater[] = []\n\n    const removeUntilkey = (elems: VDOMNode[], key: string | number | undefined) => {\n        while (!isEmpty(elems) && elems[0].key != key) {\n            if (elems[0].kind == 'component') {\n                elems[0].instance?.unmount();\n                elems[0].instance == null;\n            }\n            operations.push(remove())\n            elems.shift()\n        }\n    }\n\n    const insertUntilKey = (elems: VDOMNode[], key: string | number | undefined) => {\n        while (!isEmpty(elems) && elems[0].key != key) {\n            operations.push(insert(elems.shift()!))\n        }\n    }\n\n    const remainingOldChildren: VDOMNode[] = [...oldChildren]\n    const remainingNewChildren: VDOMNode[] = [...newChildren]\n\n\n    // find the first element that got updated\n    let nextUpdateKey = remainingOldChildren.find(k =>\n        remainingNewChildren.find(l => l.key === k.key) !== undefined\n    )?.key ?? null;\n\n    while (nextUpdateKey !== null) {\n\n        // first remove all old newChildren before the update\n        removeUntilkey(remainingOldChildren, nextUpdateKey)\n\n        // then insert all new newChildren before the update\n        insertUntilKey(remainingNewChildren, nextUpdateKey)\n\n        // create the update\n        if (!isEmpty(remainingNewChildren) && !isEmpty(remainingOldChildren)) {\n            operations.push(createDiff(remainingOldChildren.shift()!, remainingNewChildren.shift()!));\n        }\n\n        // find the next update\n        nextUpdateKey = remainingOldChildren.find(k =>\n            remainingNewChildren.find(l => l.key === k.key) !== undefined\n        )?.key ?? null\n    }\n\n    // remove all remaing old newChildren after the last update\n    removeUntilkey(remainingOldChildren, undefined)\n\n    // insert all remaing new newChildren after the last update\n    insertUntilKey(remainingNewChildren, undefined)\n\n    return operations\n}\n","import { createElement, } from \"lib/vdom\"\nimport { Component, ComponentProps, createComponent } from \"lib/component\"\nimport { VDOMAttributes, VDOMComponent, VDOMElement, VDOMNode } from \"./types/vdom\";\n\nexport function jsxs(\n    tagOrComponent: string,\n    props: VDOMAttributes & { children?: VDOMNode[] },\n    key: string | number,\n): VDOMElement;\nexport function jsxs<P extends ComponentProps>(\n    tagOrComponent: { new(): Component<P> },\n    props: P & { children?: VDOMNode[] },\n    key: string | number,\n): VDOMComponent<P>;\nexport function jsxs<P extends ComponentProps>(\n    tagOrComponent: string | { new(): Component<P> },\n    props: (VDOMAttributes | P) & { children?: VDOMNode[] },\n    key: string | number,\n) {\n    Object.assign(props, { key });\n\n    if (typeof tagOrComponent !== 'string') {\n\n        return createComponent(\n            tagOrComponent,\n            props as P & { key: string | number },\n        );\n\n    }\n    const children = props.children ?? [];\n    delete props.children;\n\n    return createElement(\n        tagOrComponent,\n        props as VDOMAttributes & { key: string | number },\n        ...(Array.isArray(children) ? children : [children])\n    );\n}\n\nexport const jsx = jsxs;\n\nexport function jsxLib(\n    tagOrComponent: string,\n    props: VDOMAttributes & { key: string | number },\n    ...children: VDOMNode[]\n): VDOMElement;\nexport function jsxLib<P extends ComponentProps>(\n    tagOrComponent: { new(): Component<P> },\n    props: P & { key: string | number },\n    ...children: VDOMNode[]\n): VDOMComponent<P>;\nexport function jsxLib<P extends ComponentProps>(\n    tagOrComponent: string | { new(): Component<P> },\n    props: (VDOMAttributes | P) & { key: string | number },\n    ...children: VDOMNode[]\n) {\n    props = props ?? {};\n\n    if (typeof tagOrComponent !== 'string') {\n\n        return createComponent(\n            tagOrComponent,\n            props as P & { key: string | number },\n        );\n\n    }\n    delete props.children;\n\n    return createElement(\n        tagOrComponent,\n        props as VDOMAttributes & { key: string | number },\n        ...(Array.isArray(children) ? children : [children])\n    );\n}\n","import { ChildUpdater, VDOMNodeUpdater } from \"./types/diff\";\nimport { VDOMNode } from \"./types/vdom\"\n\nexport const renderDOM = (rootNodeId: string, rootNode: VDOMNode) => {\n  const root = document.getElementById(rootNodeId);\n  if (!root) {\n    throw new Error(\"Could not find root element to attach to the app.\")\n  }\n  root.replaceWith(renderElement(rootNode))\n}\n\nconst renderElement = (rootNode: VDOMNode): Element | Text => {\n  if (rootNode.kind == 'text') {\n    return document.createTextNode(rootNode.value)\n  }\n\n  if (rootNode.kind === 'component') {\n    let nodeToRender: VDOMNode;\n    if (rootNode.instance) {\n      nodeToRender = rootNode.instance.render();\n    } else {\n      rootNode.instance = new rootNode.component();\n      nodeToRender = rootNode.instance.initProps(rootNode.props);\n    }\n\n    const elem = renderElement(nodeToRender);\n    rootNode.instance.notifyMounted(elem);\n    return elem;\n  }\n  const elem = document.createElement(rootNode.tagname)\n\n  for (const att in (rootNode.props ?? {})) {\n    (elem as any)[att] = rootNode.props ? rootNode.props[att] : undefined;\n  }\n\n  (rootNode.children ?? []).forEach(child =>\n    elem.appendChild(renderElement(child))\n  )\n\n  return elem\n}\n\nexport const applyDiff = (elem: Element | Text, diff: VDOMNodeUpdater): Element | Text => {\n  if (diff.kind == 'skip') return elem\n\n  if (diff.kind == 'replace') {\n    const newElem = renderElement(diff.newNode)\n    elem.replaceWith(newElem)\n    if (diff.callback) diff.callback(newElem);\n    return newElem\n  }\n\n  if ('wholeText' in elem) {\n    throw new Error('invalid update for Text node')\n  }\n\n  for (const att in diff.attributes.remove) {\n    elem.removeAttribute(att)\n  }\n\n  for (const att in diff.attributes.set) {\n    (elem as any)[att] = diff.attributes.set[att]\n  }\n\n  applyChildrenDiff(elem, diff.children)\n\n  return elem\n}\n\nconst applyChildrenDiff = (elem: Element, operations: ChildUpdater[]) => {\n  let offset = 0\n  for (let i = 0; i < operations.length; i++) {\n    const childUpdater = operations[i]\n\n    if (childUpdater.kind == 'skip') continue\n\n    if (childUpdater.kind == 'insert') {\n      const newChild = renderElement(childUpdater.node)\n      if (elem.childNodes[i + offset - 1]) {\n        elem.childNodes[i + offset - 1].after(newChild)\n      } else {\n        elem.appendChild(newChild)\n      }\n      continue\n    }\n\n    const childElem = elem.childNodes[i + offset]\n\n    if (childUpdater.kind == 'remove') {\n      childElem.remove()\n      offset -= 1\n      continue\n    }\n\n    applyDiff(childElem as Element, childUpdater)\n  }\n}","import { VDOMAttributes, VDOMNode, VDOMElement, VDOMText } from \"./types/vdom\"\n\nexport const createElement = (\n    tagname: string,\n    props: VDOMAttributes & { key: string | number },\n    ...children: (VDOMNode | string)[]\n): VDOMElement => {\n    const key = props.key;\n    const propsToPass: VDOMAttributes = props;\n    delete propsToPass.key;\n\n    const processedChildren = children.map(ch => {\n        if (typeof ch !== 'string') return ch;\n        return createText(ch)\n    })\n\n    return ({\n        kind: 'element',\n        tagname,\n        props: propsToPass,\n        children: processedChildren,\n        key\n    })\n}\n\nexport const createText = (value: string | number | boolean, key: string = ''): VDOMText => ({\n    key, kind: 'text', value: value.toString()\n})\n","const kebabize = (str: string) => str.replace(\n    /[A-Z]+(?![a-z])|[A-Z]/g,\n    ($, ofs) => (ofs ? \"-\" : \"\") + $.toLowerCase()\n);\n\nexport const makeStyle = (style: Partial<CSSStyleDeclaration>): string => {\n    return Object.entries(style).map(([k, v]) => {\n        if (v) {\n            return `${kebabize(k)}:${v};`;\n        }\n        return '';\n    }\n    ).join(' ');\n}\n","\nexport function isEmpty<T>(array: Array<T>): array is [] {\n  return array.length === 0;\n}  ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export { renderDOM } from \"./lib/render\"\nexport { Component } from \"./lib/component\"\nexport { makeStyle } from \"./utils/style\"\nexport { jsxLib as jsx } from \"./lib/jsx-runtime\"\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const MyLib = require('@selimbat/vdom-deep-dive');\n\nconsole.log(MyLib)\n\nMyLib.renderDOM('root', <div key=\"root\"><div>A</div><div>Hello World!</div></div>);\n\n"],"names":["createDiff","skip","applyDiff","Component","setState","updater","mountedElement","Error","newState","state","diff","getUpdateDiff","setProps","props","componentWillRecieveProps","initProps","currentRootNode","render","newRootNode","kind","callback","elem","requestAnimationFrame","componentDidUpdate","notifyMounted","componentDidMount","unmount","componentWillUnmount","createComponent","component","componentProps","key","instance","isEmpty","oldNode","newNode","value","replace","tagname","update","remove","insert","node","attributesToRemove","Object","keys","filter","att","includes","attributesToSet","length","reduce","upd","assign","attUpdater","set","childrenUpdater","newChildrenDiff","children","attributes","oldChildren","newChildren","operations","removeUntilkey","elems","push","shift","insertUntilKey","remainingOldChildren","remainingNewChildren","nextUpdateKey","find","k","l","undefined","createElement","jsxs","tagOrComponent","Array","isArray","jsx","jsxLib","renderDOM","rootNodeId","rootNode","root","document","getElementById","replaceWith","renderElement","createTextNode","nodeToRender","forEach","child","appendChild","newElem","removeAttribute","applyChildrenDiff","offset","i","childUpdater","newChild","childNodes","after","childElem","propsToPass","processedChildren","map","ch","createText","toString","kebabize","str","$","ofs","toLowerCase","makeStyle","style","entries","v","join","array","MyLib","require","console","log"],"sourceRoot":""}